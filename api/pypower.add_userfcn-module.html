<?xml version="1.0" encoding="ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>pypower.add_userfcn</title>
  <link rel="stylesheet" href="epydoc.css" type="text/css" />
  <script type="text/javascript" src="epydoc.js"></script>
</head>

<body bgcolor="white" text="black" link="blue" vlink="#204080"
      alink="#204080">
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">
  <!-- Home link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="pypower-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            ><a class="navbar" target="_top" href="http://www.pypower.org/">PYPOWER</a></th>
          </tr></table></th>
  </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="100%">
      <span class="breadcrumbs">
        <a href="pypower-module.html">Package&nbsp;pypower</a> ::
        Module&nbsp;add_userfcn
      </span>
    </td>
    <td>
      <table cellpadding="0" cellspacing="0">
        <!-- hide/show private -->
        <tr><td align="right"><span class="options">[<a href="javascript:void(0);" class="privatelink"
    onclick="toggle_private();">hide&nbsp;private</a>]</span></td></tr>
        <tr><td align="right"><span class="options"
            >[<a href="frames.html" target="_top">frames</a
            >]&nbsp;|&nbsp;<a href="pypower.add_userfcn-module.html"
            target="_top">no&nbsp;frames</a>]</span></td></tr>
      </table>
    </td>
  </tr>
</table>
<!-- ==================== MODULE DESCRIPTION ==================== -->
<h1 class="epydoc">Module add_userfcn</h1><p class="nomargin-top"><span class="codelink"><a href="pypower.add_userfcn-pysrc.html">source&nbsp;code</a></span></p>
<p>Appends a userfcn to the list to be called for a case.</p>

<!-- ==================== FUNCTIONS ==================== -->
<a name="section-Functions"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Functions</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-Functions"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pypower.add_userfcn-module.html#add_userfcn" class="summary-sig-name">add_userfcn</a>(<span class="summary-sig-arg">ppc</span>,
        <span class="summary-sig-arg">stage</span>,
        <span class="summary-sig-arg">fcn</span>,
        <span class="summary-sig-arg">args</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">allow_multiple</span>=<span class="summary-sig-default">False</span>)</span><br />
      Appends a userfcn to the list to be called for a case.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="pypower.add_userfcn-pysrc.html#add_userfcn">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
</table>
<!-- ==================== VARIABLES ==================== -->
<a name="section-Variables"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Variables</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-Variables"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="__package__"></a><span class="summary-name">__package__</span> = <code title="'pypower'"><code class="variable-quote">'</code><code class="variable-string">pypower</code><code class="variable-quote">'</code></code>
    </td>
  </tr>
</table>
<!-- ==================== FUNCTION DETAILS ==================== -->
<a name="section-FunctionDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Function Details</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-FunctionDetails"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
</table>
<a name="add_userfcn"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">add_userfcn</span>(<span class="sig-arg">ppc</span>,
        <span class="sig-arg">stage</span>,
        <span class="sig-arg">fcn</span>,
        <span class="sig-arg">args</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">allow_multiple</span>=<span class="sig-default">False</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="pypower.add_userfcn-pysrc.html#add_userfcn">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Appends a userfcn to the list to be called for a case.</p>
  <p>A userfcn is a callback function that can be called automatically by 
  PYPOWER at one of various stages in a simulation.</p>
  <p>Currently there are 5 different callback stages defined. Each stage 
  has a name, and by convention, the name of a user-defined callback 
  function ends with the name of the stage. The following is a description 
  of each stage, when it is called and the input and output arguments which
  vary depending on the stage. The reserves example (see <a 
  href="pypower.runopf_w_res-module.html" class="link">runopf_w_res</a>) is
  used to illustrate how these callback userfcns might be used.</p>
  <ol start="1">
    <li>
      <code>'ext2int'</code>
      <p>Called from <a href="pypower.ext2int-module.html" 
      class="link">ext2int</a> immediately after the case is converted from
      external to internal indexing. Inputs are a PYPOWER case dict 
      (<code>ppc</code>), freshly converted to internal indexing and any 
      (optional) <code>args</code> value supplied via <a 
      href="pypower.add_userfcn-module.html#add_userfcn" 
      class="link">add_userfcn</a>. Output is the (presumably updated) 
      <code>ppc</code>. This is typically used to reorder any input 
      arguments that may be needed in internal ordering by the formulation 
      stage.</p>
      <p>E.g. <code>ppc = userfcn_reserves_ext2int(ppc, args)</code></p>
    </li>
    <li>
      <code>'formulation'</code>
      <p>Called from <a href="pypower.opf-module.html" class="link">opf</a>
      after the OPF Model (<code>om</code>) object has been initialized 
      with the standard OPF formulation, but before calling the solver. 
      Inputs are the <code>om</code> object and any (optional) 
      <code>args</code> supplied via <a 
      href="pypower.add_userfcn-module.html#add_userfcn" 
      class="link">add_userfcn</a>. Output is the <code>om</code> object. 
      This is the ideal place to add any additional vars, constraints or 
      costs to the OPF formulation.</p>
      <p>E.g. <code>om = userfcn_reserves_formulation(om, args)</code></p>
    </li>
    <li>
      <code>'int2ext'</code>
      <p>Called from <a href="pypower.int2ext-module.html" 
      class="link">int2ext</a> immediately before the resulting case is 
      converted from internal back to external indexing. Inputs are the 
      <code>results</code> dict and any (optional) <code>args</code> 
      supplied via <code>add_userfcn</code>. Output is the 
      <code>results</code> dict. This is typically used to convert any 
      results to external indexing and populate any corresponding fields in
      the <code>results</code> dict.</p>
      <p>E.g. <code>results = userfcn_reserves_int2ext(results, 
      args)</code></p>
    </li>
    <li>
      <code>'printpf'</code>
      <p>Called from <a href="pypower.printpf-module.html" 
      class="link">printpf</a> after the pretty-printing of the standard 
      OPF output. Inputs are the <code>results</code> dict, the file 
      descriptor to write to, a PYPOWER options dict, and any (optional) 
      <code>args</code> supplied via <a 
      href="pypower.add_userfcn-module.html#add_userfcn" 
      class="link">add_userfcn</a>. Output is the <code>results</code> 
      dict. This is typically used for any additional pretty-printing of 
      results.</p>
      <p>E.g. <code>results = userfcn_reserves_printpf(results, fd, ppopt, 
      args)</code></p>
    </li>
    <li>
      <code>'savecase'</code>
      <p>Called from <a href="pypower.savecase-module.html" 
      class="link">savecase</a> when saving a case dict to a Python file 
      after printing all of the other data to the file. Inputs are the case
      dict, the file descriptor to write to, the variable prefix (typically
      'ppc') and any (optional) <code>args</code> supplied via <a 
      href="pypower.add_userfcn-module.html#add_userfcn" 
      class="link">add_userfcn</a>. Output is the case dict. This is 
      typically used to write any non-standard case dict fields to the case
      file.</p>
      <p>E.g. <code>ppc = userfcn_reserves_printpf(ppc, fd, prefix, 
      args)</code></p>
    </li>
  </ol>
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>ppc</code></strong> - the case dict</li>
        <li><strong class="pname"><code>stage</code></strong> - the name of the stage at which this function should be called: 
          ext2int, formulation, int2ext, printpf</li>
        <li><strong class="pname"><code>fcn</code></strong> - the name of the userfcn</li>
        <li><strong class="pname"><code>args</code></strong> - (optional) the value to be passed as an argument to the userfcn</li>
        <li><strong class="pname"><code>allow_multiple</code></strong> - (optional) if True, allows the same function to be added more 
          than once.</li>
    </ul></dd>
  </dl>
<div class="fields">      <p><strong>See Also:</strong>
        <a href="pypower.run_userfcn-module.html" 
        class="link">run_userfcn</a>, <a 
        href="pypower.remove_userfcn-module.html" 
        class="link">remove_userfcn</a>, <a 
        href="pypower.toggle_reserves-module.html" 
        class="link">toggle_reserves</a>, <a 
        href="pypower.toggle_iflims-module.html" 
        class="link">toggle_iflims</a>, <a 
        href="pypower.runopf_w_res-module.html" 
        class="link">runopf_w_res</a>.
      </p>
</div></td></tr></table>
</div>
<br />
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">
  <!-- Home link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="pypower-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            ><a class="navbar" target="_top" href="http://www.pypower.org/">PYPOWER</a></th>
          </tr></table></th>
  </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%%">
  <tr>
    <td align="left" class="footer">
    Generated by Epydoc 3.0.1 on Thu Jul  7 20:24:53 2011
    </td>
    <td align="right" class="footer">
      <a target="mainFrame" href="http://epydoc.sourceforge.net"
        >http://epydoc.sourceforge.net</a>
    </td>
  </tr>
</table>

<script type="text/javascript">
  <!--
  // Private objects are initially displayed (because if
  // javascript is turned off then we want them to be
  // visible); but by default, we want to hide them.  So hide
  // them unless we have a cookie that says to show them.
  checkCookie();
  // -->
</script>
</body>
</html>
